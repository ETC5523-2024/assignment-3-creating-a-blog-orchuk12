---
title: "The Rise of Electric Vehicles in Washington State, USA"
description: |
  Electric vehicles are rapidly increasing in the state of Washington, where one in six new cars
  sold is now electric. This growth is driven by state incentives such as rebates and a new Zero
  Emission Vehicle (ZEV) legislature.
author: "Rayyan Aamir"
date: "2024-10-04"
categories: [Electric Vehicles, Seattle]
css: blog.css
format:
  html:
    toc: true
    toc_float: true
    fig-align: center
    number-sections: false
    fig-cap-location: top
---

```{r setup}
#| include: false

knitr::opts_chunk$set(echo = FALSE,
                      eval = TRUE,
                      message = FALSE,
                      warning = FALSE,
                      error = FALSE)
```

```{r loading-libraries}

library(tidyverse)
library(janitor)
library(usmap)
library(kableExtra)
library(stringr)
library(leaflet)
library(sf)

```

```{r dataset}

vehicle <- read_csv("data/Electric_Vehicle_Population_Data.csv")

```

```{r data-cleaning}
#| eval: false

# Removing all missing observations
clean_vehicle <- vehicle %>%
  drop_na()
  
# Cleaning variable names for easier data handling
clean_vehicle <- clean_vehicle %>%
  clean_names() %>%
  filter(model_year >= 2008) %>%
  filter(state == "WA")

# Deselecting vin-number
clean_vehicle <- clean_vehicle %>%
  select(!vin_1_10)

# Cleaning location variables
clean_vehicle <- clean_vehicle %>%
  mutate(vehicle_location = str_remove_all(vehicle_location, "POINT \\(|\\)"))

clean_vehicle <- clean_vehicle %>%
  mutate(lon = as.numeric(str_extract(vehicle_location, "^[-\\d\\.]+")),
         lat = as.numeric(str_extract(vehicle_location, "[-\\d\\.]+$")))
  
# Saving to local
write_csv(clean_vehicle, "data/clean-vehicle.csv")

```

```{r loading-vehicle-clean}

clean_vehicle <- read_csv("data/clean-vehicle.csv")

```


### Problem Description

<div class = "blog-text-just">

Electric vehicles are on the rise and every one in six new vehicles sold in Washington State is now an electric vehicle. Electric vehicles (EVs) and plug-in hybrid vehicles (HEVs) have been selling almost twice as quickly in Washington State (WA) than in the rest of the country, according to the findings of Electric Power Research Institute (The Seattle Medium, 2023). These EVs and HEVs are the future of transportation on land, bringing forth not only immense sales but benefits to our planet and to consumers as well. As of 2024, there are over 180,000 EVs in Washington with the majority of them being focused around Seattle. Now there are two main types of EVs we should be concerning ourselves with:

1. **Battery Electric Vehicles** - These vehicles are off the bat, a category of their own, and are fully electric and powered through a battery along with an electric motor. This allows it to produce instant power, no noise. Furthermore, there are very advanced technological features within the car as these vehicles are targeted at a demographic that is environmentally cautious, prefers self-driving vehicles, and wants instant power and speed.

2. **Plug-in Hybrid Electric Vehicles** - The concepts and technologies of regular EVs can also be implemented into traditional fuel powered cars. These unique breeds of cars provide customers with various bonuses such as excellent fuel efficiency, an engine for speed and a hybrid battery for power, and various high technological features including self driving.

One might wonder, why are EVs becoming so abundant in the state of Washington, and is this to follow within the entirety of the United States? When it comes to Seattle and WA, the state has recently passed a new legislature in March of 2020 by the name of Zero Emission Vehicles (ZEV). This legislature aims to gradually increase the number of ZEVs sold until all new vehicles meet this new standard by 2035. There is a massive race ahead of us where car manufacturers will aim to gain the absolute highest number of battery efficiency and life, whilst ensuring to maximize the number of kilometers/miles the vehicle will travel.

</div>

```{r image/ev.jpg}
#| fig-align: center
#| out-width: 80%

knitr::include_graphics("../../images/ev.jpg")

```

### Data Description

<div class = "blog-text-just">

The data to conduct the analysis for this blogpost article has been extracted from [Kaggle](https://www.kaggle.com/datasets/jainaru/electric-vehicle-population/data) and this dataset was shared by a user named “Jaina”, it is titled, “Electric Vehicle Data”. It was shared in 2024 and tends to be updated quarterly. 

</div>

```{r}

# clean_vehicle_vars <- select()

```


### Analysis

```{r}
#| cache: true

# Create a spatial data frame from the clean_vehicle data
clean_vehicle_sf <- st_as_sf(clean_vehicle, coords = c("lon", "lat"), crs = 4326)

# Create a grid over the area with a specific cell size (e.g., 0.05 degrees)
grid <- st_make_grid(clean_vehicle_sf, cellsize = 0.05, square = TRUE)

# Convert the grid to an sf object
grid_sf <- st_as_sf(grid)

# Perform a spatial join to count the number of vehicles in each grid cell
grid_counts <- st_join(clean_vehicle_sf, grid_sf, join = st_intersects)
grid_counts <- grid_counts %>%
  group_by(geometry) %>%  # Group by the grid cells
  summarize(count = n()) %>%  # Count the number of vehicles in each grid cell
  st_as_sf()

cities <- data.frame(
  city = c("Seattle", "Olympia", "Tacoma", "Spokane"),
  lat = c(47.6062, 47.0379, 47.2529, 47.4588),
  lon = c(-122.3321, -122.9007, -122.4443, -117.4360)
)

```


```{r}
#| label: fig-leaflet
#| fig-cap: "Number of Registered EVs"

# Plot the result using Leaflet
map <- leaflet() %>%
  addTiles() %>%
  setView(lng = -120, lat = 47, zoom = 6) %>%
  addCircleMarkers(data = grid_counts,
                   lng = ~st_coordinates(geometry)[, 1],
                   lat = ~st_coordinates(geometry)[, 2],
                   radius = ~log10(count),  # Circle size proportional to the count
                   color = "red",
                   fillOpacity = 0.7,
                   popup = ~paste("EV Count:", count)) %>%
  # Add city labels
  addLabelOnlyMarkers(data = cities,
                      lng = ~lon,
                      lat = ~lat,
                      label = ~city,
                      labelOptions = labelOptions(noHide = TRUE, direction = "top", textOnly = TRUE, style = list(
                        "color" = "blue",
                        "font-size" = "12px",
                        "font-weight" = "bold"
                      ))) %>%
  addLegend("topright",
            colors = "red",
            labels = "EV Count",
            title = "Aggregated EV Observations")

map

```

<div class = "figure-desc">

@fig-leaflet above shows the aggregated number of EVs spread across Washington State. The map above is demonstrating the locations where the populations of these vehicles is at its highest. It shows patterns that a big chunk of these cars are registered around major towns and cities such as: Seattle, Portland, and Spokane.

</div>

<div class = "blog-text-just">

In @fig-leaflet, the distribution of EVs around Washington State is relatively scattered except for a few particular areas, such as: Seattle, Spokane, and Portland. Being a technological haven of innovation and advancement of many multinational corporations within the US, Seattle sees a lot of these MNCs based around this area offer incentives to their employees that own an electric vehicle such as rebates or free charging stations, namely Oracle and Amazon provide this. The individuals that own an EV are either of high income earning households and are able to afford some of the steep prices or are those that tend to be more environmentally conscious.

Coming back to the question, why are there so many electric vehicles in Washington? In mid-2023, the state of Washington announced an EV instant rebate program where the local government aimed to provide 6500-8000 rebates between $2500-$9000 towards purchasing or leasing EVs (Washington State Department of Commerce, 2024). With this, the local government has successfully introduced one of the first low cost EV lease programs within the US and hopes to achieve a higher percentage of EVs present in the market.

</div>

```{r}
#| label: fig-lineplot
#| fig-cap: "Rising EV Sales Over Time"

# Getting the counts for each electric vehicle type by model year
summary_data <- clean_vehicle %>%
  filter(state == "WA") %>%
  group_by(electric_vehicle_type, model_year) %>%
  summarise(count = n())

# Creating a timeseries barplot
plot2 <- summary_data %>%
  ggplot(aes(x = factor(model_year), 
             y = count,
             color = electric_vehicle_type,
             group = electric_vehicle_type)) +
  geom_point(size = 2.5) +
  geom_line(linewidth = 1) +
  facet_wrap(~ electric_vehicle_type,
             scales = "free_y") +
  theme_bw() +
  labs(x = "Model Year", 
       y = "Count", 
       fill = "Model Year") +
  scale_x_discrete(breaks = seq(2010, 2024, 2)) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        legend.position = "none")

plot2

```

<div class = "figure-desc">

@fig-lineplot above shows the number of BEVs and PHEVs sold over time. The plot aims to illustrate the rising numbers and helps to identify patterns in the number of sales. The goal is to notice the significant rise in sales for 2023.

</div>

<div class = blog-text-just>

Above in @fig-lineplot, and we can see that the overall number of sales has been increasing over time, for both types of EVs. One odd thing that might be noticed is that there appears to be no BEVs or PHEVs prior to 2008, even though popular hybrid-vehicles such as the Toyota Prius have been popular since the early 2000s. This is because these new classifications were introduced when the BYD F3DM was launched in China, and marketed as the “first PHEV”, whilst equally in around 2010, the Nissan Leaf was the first globally marketed BEV which really kicked things off in this industry.

@fig-lineplot also demonstrates that there is a significant rise in both types of EVs in 2023, which indicates the behaviour of consumers that “jumped the gun” and took advantage of these new rebates offered by the local government. We also notice that although PHEVs are lesser in numbers compared to true BEVs, they are still showing immense growth over the years and especially during 2024 where it appears that there are more PHEVs registered than BEVs.


</div>

### Conclusion

<div class = blog-text-just>

Electric vehicles continue becoming popular, their abundance around the state of Washington continues to grow. With the implementation of the ZEV legislation and the rebates provided to the population, Washington State is well positioned and on its way to achieving the target of all new vehicles sold to be a ZEV by 2035.

This brings forth also an entirely new perspective to the game, as manufacturers are also going to be pushed to ensure that their vehicles meet the criteria for a vehicle to be classified as a ZEV, which is that the vehicle must be able to travel at least 50 miles on battery power alone! Studies indicate that EVs can significantly reduce energy burdens and thus, in conclusion, this is all a push towards adapting to these new changes and working towards achieving lower carbon emissions in the state (Vega-Perkins et al., 2023). The US must aim to accelerate the EV adoption rates along with getting the population accustomed to driving electric vehicles for when they are the only vehicles around.

</div>

### References

EV Instant Rebate Program - Washington State Department of Commerce. (2024, August 2).
Washington State Department of Commerce.
[https://www.commerce.wa.gov/growing-the-economy/energy/electric-vehicles/ev-instant-reb
ate-program/](https://www.commerce.wa.gov/growing-the-economy/energy/electric-vehicles/ev-instant-reb
ate-program/) <br>

Medium, S. (2023, August 4). Electric vehicles on the rise in Washington State - The Seattle
Medium. The Seattle Medium.
[https://seattlemedium.com/electric-vehicles-on-the-rise-in-washington-state/](https://seattlemedium.com/electric-vehicles-on-the-rise-in-washington-state/) <br>

Vega-Perkins, J., Newell, J. P., & Keoleian, G. (2023). Mapping electric vehicle impacts:
greenhouse gas emissions, fuel costs, and energy justice in the United States. Environmental
Research Letters, 18(1), 14027.
[https://doi.org/10.1088/1748-9326/aca4e6](https://doi.org/10.1088/1748-9326/aca4e6) <br>

Washington State Department of Ecology. (2024, April). A record year for electric vehicles
and plug-in hybrids in Washington. Ecology Blog.
[https://ecology.wa.gov/blog/april-2024/a-record-year-for-electric-vehicles-and-plug-in-hybrid
s-in-washington](https://ecology.wa.gov/blog/april-2024/a-record-year-for-electric-vehicles-and-plug-in-hybrids-in-washington) <br>

Washington State Department of Ecology. (n.d.). Zero emission vehicles (ZEV). Washington
State Department of Ecology.
[https://ecology.wa.gov/air-climate/reducing-greenhouse-gas-emissions/zev](https://ecology.wa.gov/air-climate/reducing-greenhouse-gas-emissions/zev)

